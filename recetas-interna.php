<?php 
    include 'assets/templates/header.php';
?>

<!-- RECETAS -->
<div class="limit_receta">
    <div class="card card--color card--width">
        <a class="card__contenedor-imagen">
            <img src="assets/images/receta-interna.png" alt="" class="card__imagen-receta card__imagen-receta--display">
            <img src="assets/images/receta-mobile.png" alt="" class="card__imagen-receta card__imagen-receta--height">
        </a>
        <div class="card__contenedor-contenido card__contenedor-contenido--bottom">
            <h2 class="card__subtitulo card__subtitulo--color card__subtitulo--font">Lorem, ipsum dolor.</h2>
        </div>
        <div class="card__contenedor-titulo card__contenedor-titulo--left card__contenedor-titulo--bottom">
            <img src="assets/images/coffee-white.svg"  alt="" class="card__icono">
            <p class="card__titulo card__titulo card__titulo--color">Desayuno</p>
        </div>
    </div>
</div>

<!-- CALCULA LOS INGREDIENTES -->

<section class="calcula-ingredientes">
    <div class="title">
        <h2 class="title__contenido title__contenido--interna">
            Calcula los ingredientes
        </h2>
    </div>
    <div class="calcula-ingredientes__contenedor">
        <div class="calcula-ingredientes__contenido" >
            <p class="calcula-ingredientes__parrafo">¿Cuántas porcionas vas a preparar?</p>
        </div>
        <div class="categorias categorias--flex" >
            <img src="assets/images/ingrediente-receta.svg">
            <select class="categorias__select">
                <option class="categorias__option">
                    1
                </option>
                <option class="categorias__option">
                    2
                </option>
                <option class="categorias__option">
                    3
                </option>
                <option class="categorias__option">
                    4
                </option>
            </select>
            <img src="assets/images/down.svg" class="categorias__icono">
        </div>
    </div>
</section>

<!-- TODOS LOS INGREDIENTES -->

<section class="ingrediente-calorias">
    <div class="ingrediente">
        <div class="ingrediente__contenedor-top">
            <h2 class="ingrediente__titulo">Ingredientes</h2>
        </div>
        <div class="ingrediente__contenedor-middle">
            <div class="ingrediente__contenedor-pasos">
                <span class="ingrediente__numero">10</span>
                <p class="ingrediente__descripcion">Lorem, ipsum dolor. lorem lorem</p>
            </div>
            <div class="ingrediente__contenedor-pasos">
                <span class="ingrediente__numero">10</span>
                <p class="ingrediente__descripcion">Lorem, ipsum dolor.</p>
            </div>
            <div class="ingrediente__contenedor-pasos">
                <span class="ingrediente__numero">10</span>
                <p class="ingrediente__descripcion">Lorem, ipsum dolor.</p>
            </div>
            <div class="ingrediente__contenedor-pasos">
                <span class="ingrediente__numero">10</span>
                <p class="ingrediente__descripcion">Lorem, ipsum dolor.</p>
            </div>
        </div>
        <div class="ingrediente__border"></div>
        <div class="ingrediente__tiempo">
            <p class="ingrediente__tiempo-texto">Tiempo para # porciones</p>
            <div class="ingrediente__tiempo-contenedor">
                <img src="assets/images/clock.svg" alt="" class="ingrendiente__tiempo-icono">
                <p class="ingrediente__tiempo-horas">00:00 h</p>
            </div>
        </div>
    </div>
    <div class="ingrediente caloria">
        <div class="ingrediente__contenedor-top caloria__contenedor-top">
            <h2 class="ingrediente__titulo caloria__titulo">Calorías</h2>
        </div>
        <div class="caloria__middle">
            <div class="caloria__contenedor">
                <p class="caloria__parrafo caloria__parrafo--hidden">Lorem, ipsum dolor. asdsa</p>
                <p class="caloria__parrafo"><b>Medida</b></p>
                <p class="caloria__parrafo"><b>Calorías</b></p>
            </div>
            <div class="caloria__contenedor">
                <p class="caloria__parrafo">Lorem, ipsum dolor.</p>
                <p class="caloria__parrafo">000 gr</p>
                <p class="caloria__parrafo">000</p>
            </div>
            <div class="caloria__contenedor">
                <p class="caloria__parrafo">Lorem, ipsum dolor.</p>
                <p class="caloria__parrafo">000 gr</p>
                <p class="caloria__parrafo">000</p>
            </div>
            <div class="caloria__contenedor">
                <p class="caloria__parrafo">Lorem, ipsum dolor.</p>
                <p class="caloria__parrafo">000 gr</p>
                <p class="caloria__parrafo">000</p>
            </div>
            <div class="caloria__contenedor">
                <p class="caloria__parrafo">Lorem, ipsum dolor.</p>
                <p class="caloria__parrafo">000 gr</p>
                <p class="caloria__parrafo">000</p>
            </div>
            <div class="caloria__contenedor">
                <p class="caloria__parrafo">Lorem, ipsum dolor.</p>
                <p class="caloria__parrafo">000 gr</p>
                <p class="caloria__parrafo">000</p>
            </div>
            <div class="caloria__contenedor">
                <p class="caloria__parrafo">Lorem, ipsum dolor.</p>
                <p class="caloria__parrafo">000 gr</p>
                <p class="caloria__parrafo">000</p>
            </div>
        </div>
    </div>
</section>

<!-- PREPARACION -->

<section class="preparacion">
    <div class="title">
        <h2 class="title__contenido title__contenido--interna">
            Preparación
        </h2>
    </div>
    <div class="preparacion__contenedor">
        <div class="preparacion__items">
            <div class="preparacion__pasos">
                <p class="preparacion__numeros">
                    01
                </p>
            </div>
            <p class="preparacion__descripcion">
                excepturi exercitationem minus incidunt. Harum asperiores dolorem praesentium libero quos labore velit magni, omnis laudantium, dolor minima placeat aliquam non hic sint tenetur. Nemo odit quam tenetur deleniti rem corporis quibusdam nostrum asperiores doloremque laboriosam?
            </p>
        </div>
        <div class="preparacion__items">
            <div class="preparacion__pasos">
                <p class="preparacion__numeros">
                    02
                </p>
            </div>
            <p class="preparacion__descripcion">
                excepturi exercitationem minus incidunt. Harum asperiores dolorem praesentium libero quos labore velit magni, omnis laudantium, dolor minima placeat aliquam non hic sint tenetur. Nemo odit quam tenetur deleniti rem corporis quibusdam nostrum asperiores doloremque laboriosam?
            </p>
        </div>
        <div class="preparacion__items">
            <div class="preparacion__pasos">
                <p class="preparacion__numeros">
                    03
                </p>
            </div>
            <p class="preparacion__descripcion">
                excepturi exercitationem minus incidunt. Harum asperiores dolorem praesentium libero quos labore velit magni, omnis laudantium, dolor minima placeat aliquam non hic sint tenetur. Nemo odit quam tenetur deleniti rem corporis quibusdam nostrum asperiores doloremque laboriosam?
            </p>
        </div>
        <div class="boton__contenedor boton__contenedor--recetas">
            <button class="boton boton--relative boton--recetas boton--flex">
                <img src="assets/images/descargar.svg" alt="" class="boton__icono">
                <a class="boton__link">DESCARGAR RECETA</a>    
            </button>
        </div>
    </div>
</section>

<!-- COMENTARIOS -->

<section class="preparacion">
    <div class="title">
        <h2 class="title__contenido title__contenido--interna">
            Comentarios
        </h2>
    </div>
    <div class="comentarios">
        <div class="comentarios__contenedor">
            <img src="assets/images/blog-1.png" alt="" class="comentarios__imagen">
            <div class="comentarios__bloque">
                <h2 class="comentarios__titulo">Lorem ipsum dolor sit.</h2>
                <p class="comentarios__fecha">Mayo 18, 2021</p>
                <p class="comentarios__descripcion">Lorem ipsum dolor sit amet consectetur, adipisicing elit. Beatae accusamus asperiores est, voluptates deleniti dolore corporis debitis veniam, rem cupiditate nemo, at quo! Culpa ratione cum pariatur possimus recusandae saepe cupiditate, impedit laudantium, iste fugiat sunt ab eius vel quam tempore enim consectetur! Corporis rem numquam, eaque in ducimus distinctio.</p>
            </div>
        </div>
        <div class="comentarios__contenedor">
            <img src="assets/images/blog-1.png" alt="" class="comentarios__imagen">
            <div class="comentarios__bloque">
                <h2 class="comentarios__titulo">Lorem ipsum dolor sit.</h2>
                <p class="comentarios__fecha">Mayo 18, 2021</p>
                <p class="comentarios__descripcion">Lorem ipsum dolor sit amet consectetur, adipisicing elit. Beatae accusamus asperiores est, voluptates deleniti dolore corporis debitis veniam, rem cupiditate nemo, at quo! Culpa ratione cum pariatur possimus recusandae saepe cupiditate, impedit laudantium, iste fugiat sunt ab eius vel quam tempore enim consectetur! Corporis rem numquam, eaque in ducimus distinctio.</p>
            </div>
        </div>
    </div>
</section>

<!-- FORMULARIO -->
<section class="preparacion">
<div class="title">
        <h2 class="title__contenido title__contenido--interna">
            Deja tu comentario
        </h2>
    </div>
    <form action="" method="post" class="formulario" id="formulario">

        <!-- grupo nombre -->
        <div class="formulario__grupo" id="grupo__nombre">
            <div class="formulario__grupo-input">
                <input type="text" class="formulario__input" name="nombre" id="nombre" placeholder="Nombre">
                <img src="assets/images/user.svg" alt="" class="formulario__icono-input">
                <i class="formulario__validacion-estado fas fa-times-circle"></i>
            </div>
            <p class="formulario__input-error">El nombre no puede contener números.</p>
        </div>

         <!-- grupo apellidos -->
         <div class="formulario__grupo" id="grupo__apellido">
            <div class="formulario__grupo-input">
                <input type="text" class="formulario__input" name="apellido" id="apellido" placeholder="Apellido">
                <img src="assets/images/user.svg" alt="" class="formulario__icono-input">
                <i class="formulario__validacion-estado fas fa-times-circle"></i>
            </div>
            <p class="formulario__input-error">El apellido no puede contener números.</p>
        </div>

        <!-- grupo correo electronico -->
        <div class="formulario__grupo" id="grupo__correo">
            <div class="formulario__grupo-input">
                <input type="email" class="formulario__input" name="correo" id="correo" placeholder="correo@correo.com">
                <img src="assets/images/mail.svg" alt="" class="formulario__icono-input">
                <i class="formulario__validacion-estado fas fa-times-circle"></i>
            </div>
            <p class="formulario__input-error">El correo solo puede contener, letras, numeros, puntos y guin bajo</p>
        </div>

        <!-- grupo telefono -->
        <div class="formulario__grupo" id="grupo__telefono">
            <div class="formulario__grupo-input">
                <input type="text" class="formulario__input" name="telefono" id="telefono" placeholder="44945762">
                <img src="assets/images/phone.svg" alt="" class="formulario__icono-input">
                <i class="formulario__validacion-estado fas fa-times-circle"></i>
            </div>
            <p class="formulario__input-error">El teléfono solo puede contener números y el máximo son 14 dígitos</p>
        </div>

        <!-- Grupo Mensaje -->
        
        <div class="formulario__grupo formulario__grupo__input-width" id="grupo__mensaje">
            <label class="formulario__label" for="mensaje">Comentario</label>
            <div class="formulario__grupo-input">
                <textarea class="formulario__input formulario__input__width" name="mensaje" id="mensaje" cols="30" rows="10">Escribe tu mensaje aquí</textarea>
            </div>
            <p class="formulario__input-error">Por favor escriba su mensaje</p>
        </div>

        <!-- Grupo Enviar -->

        <div class="formulario__mensaje" id="formulario__mensaje">
            <p class="formulario__error"><i class="fas fa-exclamation-triangle"></i> <b class="white">Error:</b> Por favor rellene el formulario correctamente</p>
        </div>

        <div class="formulario__grupo formulario__grupo-btn-enviar">
            <button type="submit" class="formulario__btn boton boton--relative boton--recetas boton--flex">Enviar</button>
            <p class="formulario__mensaje-exito" id="formulario__mensaje-exito">¡Formulario enviado exitosamente!</p>
        </div>
    </form>
</section>


<script>
    const formulario = document.getElementById('formulario');
const inputs = document.querySelectorAll('#formulario input');

const expresiones = {
	nombre: /^[a-zA-ZÀ-ÿ\s]{3,40}$/, // Letras y espacios, pueden llevar acentos.
	correo: /^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/,
	telefono: /^\d{7,14}$/, // 7 a 14 numeros.
    apellido: /^[a-zA-ZÀ-ÿ\s]{3,40}$/,
}

const campos = {
	nombre: false,
	correo: false,
	telefono: false,
    apellido: false,
}

const validarFormulario = (e) =>{
    switch (e.target.name){
        case 'nombre':
            validarCampo(expresiones.nombre, e.target, 'nombre');
        break;      
        case 'apellido':
            validarCampo(expresiones.apellido, e.target, 'apellido');
        break;
        case 'correo':
            validarCampo(expresiones.correo, e.target, 'correo');
        break;    
        case 'telefono':
            validarCampo(expresiones.telefono, e.target, 'telefono');
        break;    
    }
};

const validarCampo = (expresion, input, campo) =>{
    if(expresion.test(input.value)){
        document.getElementById(`grupo__${campo}`).classList.remove('formulario__grupo-incorrecto');
        document.getElementById(`grupo__${campo}`).classList.add('formulario__grupo-correcto');
        document.querySelector(`#grupo__${campo} i`).classList.add('fa-check-circle');
        document.querySelector(`#grupo__${campo} i`).classList.remove('fa-times-circle');
        document.querySelector(`#grupo__${campo} .formulario__input-error`).classList.remove('formulario__input-error-activo');
        campos[campo] = true;
    } else{
        document.getElementById(`grupo__${campo}`).classList.add('formulario__grupo-incorrecto');
        document.getElementById(`grupo__${campo}`).classList.remove('formulario__grupo-correcto');
        document.querySelector(`#grupo__${campo} i`).classList.remove('fa-check-circle');
        document.querySelector(`#grupo__${campo} i`).classList.add('fa-times-circle');
        document.querySelector(`#grupo__${campo} .formulario__input-error`).classList.add('formulario__input-error-activo');
        campos[campo] = false;
    }
}

inputs.forEach((input) => {
    input.addEventListener('keyup', validarFormulario);
    input.addEventListener('blur', validarFormulario);
});

formulario.addEventListener('submit', (e) =>{
    e.preventDefault();

    const terminos = document.getElementById('terminos');
	if(campos.nombre && campos.correo && campos.telefono && campos.apellido){
		formulario.reset();

		document.getElementById('formulario__mensaje-exito').classList.add('formulario__mensaje-exito-activo');
		setTimeout(() => {
			document.getElementById('formulario__mensaje-exito').classList.remove('formulario__mensaje-exito-activo');
		}, 5000);

		document.querySelectorAll('.formulario__grupo-correcto').forEach((icono) => {
			icono.classList.remove('formulario__grupo-correcto');
		});

        setTimeout( () => {window.location.href = "/gracias.php";}, 3000);
	} else {
		document.getElementById('formulario__mensaje').classList.add('formulario__mensaje-activo');
        setTimeout(() => {
			document.getElementById('formulario__mensaje').classList.remove('formulario__mensaje-activo');
		}, 4000);
	}
});
</script>
<?php
include 'assets/templates/footer.php';
?>     